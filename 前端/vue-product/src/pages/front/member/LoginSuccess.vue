<template>
  <div class="loading-container">
    <el-result
      icon="info"
      title="Google ç™»å…¥ä¸­"
      sub-title="è«‹ç¨å€™ï¼Œæ­£åœ¨é©—è­‰æ‚¨çš„èº«åˆ†..."
    >
      <template #icon>
        <el-icon class="is-loading" :size="50">
          <Loading />
        </el-icon>
      </template>
    </el-result>
  </div>
</template>

<script setup>
import { useRoute, useRouter } from 'vue-router'
import { onMounted } from 'vue'
import { ElMessage } from 'element-plus'
import { Loading } from '@element-plus/icons-vue'

const route = useRoute()
const router = useRouter()

onMounted(() => {
  const token = route.query.token

  if (token) {
    localStorage.setItem('jwt', token)
    ElMessage.success('ç™»å…¥æˆåŠŸï¼æ­¡è¿å›ä¾† ğŸ‘‹')
    router.push('/')
  } else {
    ElMessage.error('ç™»å…¥å¤±æ•—ï¼Œè«‹é‡æ–°å˜—è©¦')
    router.push('/login')
  }
})
</script>

<style scoped>
.loading-container {
  display: flex;
  justify-content: center;
  align-items: center;
  height: 100vh;
  background: #f5f7fa;
}
</style>
